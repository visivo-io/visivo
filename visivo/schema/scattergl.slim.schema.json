{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://visivo.io/trace-properties/schema",
  "description": "Slim schema for scattergl - essential properties only",
  "$defs": {
    "color": {
      "type": "string",
      "description": "A valid color in hex, rgb, rgba, hsl, hsv, or named CSS color",
      "oneOf": [
        {
          "pattern": "^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$",
          "description": "Hex color (e.g., #d3d3d3 or #fff)"
        },
        {
          "pattern": "^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$",
          "description": "RGB color (e.g., rgb(255, 0, 0))"
        },
        {
          "pattern": "^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(0|1|0?\\.\\d+)\\s*\\)$",
          "description": "RGBA color (e.g., rgba(255, 0, 0, 0.5))"
        },
        {
          "pattern": "^hsl\\(\\s*\\d{1,3}\\s*,\\s*\\d{1,3}%\\s*,\\s*\\d{1,3}%\\s*\\)$",
          "description": "HSL color (e.g., hsl(0, 100%, 50%))"
        },
        {
          "pattern": "^hsv\\(\\s*\\d{1,3}\\s*,\\s*\\d{1,3}%\\s*,\\s*\\d{1,3}%\\s*\\)$",
          "description": "HSV color (e.g., hsv(0, 100%, 100%))"
        },
        {
          "pattern": "^(aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen)$",
          "description": "Named CSS color"
        }
      ]
    },
    "colorscale": {
      "description": "A Plotly colorscale either by name or a custom array of [value, color] pairs.",
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Greys",
            "YlGnBu",
            "Greens",
            "YlOrRd",
            "Bluered",
            "RdBu",
            "Reds",
            "Blues",
            "Picnic",
            "Rainbow",
            "Portland",
            "Jet",
            "Hot",
            "Blackbody",
            "Earth",
            "Electric",
            "Viridis",
            "Cividis"
          ],
          "description": "Predefined Plotly colorscale name"
        },
        {
          "type": "array",
          "items": {
            "type": "array",
            "minItems": 2,
            "maxItems": 2,
            "items": {
              "oneOf": [
                {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                {
                  "$ref": "#/$defs/color"
                }
              ]
            }
          },
          "description": "Custom colorscale as an array of [value, color] pairs"
        }
      ]
    },
    "query-string": {
      "type": "string",
      "description": "A string that will pull the value from the traces query results or inject an input value.",
      "oneOf": [
        {
          "pattern": "^\\?\\{.*\\}$",
          "description": "String in the format ?{ x } where x can be anything"
        },
        {
          "pattern": "^query\\(.*\\)$",
          "description": "String in the format query( x ) where x can be anything"
        },
        {
          "pattern": "^column\\(.*\\)(?:\\[-?\\d+\\])?$",
          "description": "String in the format column( x ) or column( x )[n] where x can be anything and n is a positive or negative number"
        },
        {
          "pattern": "^\\$\\{.*\\}$",
          "description": "String in the format ${ x } for input references like ${ref(input).value} or ${input.value}"
        }
      ]
    }
  },
  "type": "object",
  "properties": {
    "type": {
      "const": "scattergl"
    },
    "x": {
      "description": "Sets the x coordinates.",
      "oneOf": [
        {
          "$ref": "#/$defs/query-string"
        },
        {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      ],
      "tag": "primary"
    },
    "y": {
      "description": "Sets the y coordinates.",
      "oneOf": [
        {
          "$ref": "#/$defs/query-string"
        },
        {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      ],
      "tag": "primary"
    },
    "marker": {
      "type": "object",
      "properties": {
        "color": {
          "description": "Sets the marker color. It accepts either a specific color or an array of numbers that are mapped to the colorscale relative to the max and min values of the array or relative to `marker.cmin` and `marker.cmax` if set.",
          "oneOf": [
            {
              "oneOf": [
                {
                  "$ref": "#/$defs/query-string"
                },
                {
                  "$ref": "#/$defs/color"
                }
              ]
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "$ref": "#/$defs/query-string"
                  },
                  {
                    "$ref": "#/$defs/color"
                  }
                ]
              }
            }
          ],
          "tag": "secondary"
        },
        "size": {
          "description": "Sets the marker size (in px).",
          "oneOf": [
            {
              "oneOf": [
                {
                  "$ref": "#/$defs/query-string"
                },
                {
                  "type": "number",
                  "minimum": 0,
                  "default": 6
                }
              ]
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "$ref": "#/$defs/query-string"
                  },
                  {
                    "type": "number",
                    "minimum": 0,
                    "default": 6
                  }
                ]
              }
            }
          ],
          "tag": "secondary"
        }
      },
      "additionalProperties": false
    },
    "text": {
      "description": "Sets text elements associated with each (x,y) pair. If a single string, the same string appears over all the data points. If an array of string, the items are mapped in order to the this trace's (x,y) coordinates. If trace `hoverinfo` contains a *text* flag and *hovertext* is not set, these elements will be seen in the hover labels.",
      "oneOf": [
        {
          "default": "",
          "type": "string"
        },
        {
          "type": "array",
          "items": {
            "default": "",
            "type": "string"
          }
        }
      ],
      "tag": "secondary"
    },
    "error_x": {
      "type": "object",
      "properties": {
        "array": {
          "description": "Sets the data corresponding the length of each error bar. Values are plotted relative to the underlying data.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "type": "number"
                  },
                  {
                    "type": "string"
                  }
                ]
              }
            }
          ]
        },
        "arrayminus": {
          "description": "Sets the data corresponding the length of each error bar in the bottom (left) direction for vertical (horizontal) bars Values are plotted relative to the underlying data.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "type": "number"
                  },
                  {
                    "type": "string"
                  }
                ]
              }
            }
          ]
        },
        "arrayminussrc": {
          "description": "Sets the source reference on Chart Studio Cloud for `arrayminus`.",
          "type": "string"
        },
        "arraysrc": {
          "description": "Sets the source reference on Chart Studio Cloud for `array`.",
          "type": "string"
        },
        "color": {
          "description": "Sets the stroke color of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "$ref": "#/$defs/color"
            }
          ]
        },
        "copy_ystyle": {
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "symmetric": {
          "description": "Determines whether or not the error bars have the same length in both direction (top/bottom for vertical bars, left/right for horizontal bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "thickness": {
          "description": "Sets the thickness (in px) of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 2
            }
          ]
        },
        "traceref": {
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          ]
        },
        "tracerefminus": {
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          ]
        },
        "type": {
          "description": "Determines the rule used to generate the error bars. If *constant`, the bar lengths are of a constant value. Set this constant in `value`. If *percent*, the bar lengths correspond to a percentage of underlying data. Set this percentage in `value`. If *sqrt*, the bar lengths correspond to the square of the underlying data. If *data*, the bar lengths are set with data set `array`.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "enum": [
                "percent",
                "constant",
                "sqrt",
                "data"
              ]
            }
          ]
        },
        "value": {
          "description": "Sets the value of either the percentage (if `type` is set to *percent*) or the constant (if `type` is set to *constant*) corresponding to the lengths of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 10
            }
          ]
        },
        "valueminus": {
          "description": "Sets the value of either the percentage (if `type` is set to *percent*) or the constant (if `type` is set to *constant*) corresponding to the lengths of the error bars in the bottom (left) direction for vertical (horizontal) bars",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 10
            }
          ]
        },
        "visible": {
          "description": "Determines whether or not this set of error bars is visible.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "width": {
          "description": "Sets the width (in px) of the cross-bar at both ends of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0
            }
          ]
        }
      },
      "additionalProperties": false,
      "tag": "secondary"
    },
    "error_y": {
      "type": "object",
      "properties": {
        "array": {
          "description": "Sets the data corresponding the length of each error bar. Values are plotted relative to the underlying data.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "type": "number"
                  },
                  {
                    "type": "string"
                  }
                ]
              }
            }
          ]
        },
        "arrayminus": {
          "description": "Sets the data corresponding the length of each error bar in the bottom (left) direction for vertical (horizontal) bars Values are plotted relative to the underlying data.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "type": "number"
                  },
                  {
                    "type": "string"
                  }
                ]
              }
            }
          ]
        },
        "arrayminussrc": {
          "description": "Sets the source reference on Chart Studio Cloud for `arrayminus`.",
          "type": "string"
        },
        "arraysrc": {
          "description": "Sets the source reference on Chart Studio Cloud for `array`.",
          "type": "string"
        },
        "color": {
          "description": "Sets the stroke color of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "$ref": "#/$defs/color"
            }
          ]
        },
        "symmetric": {
          "description": "Determines whether or not the error bars have the same length in both direction (top/bottom for vertical bars, left/right for horizontal bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "thickness": {
          "description": "Sets the thickness (in px) of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 2
            }
          ]
        },
        "traceref": {
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          ]
        },
        "tracerefminus": {
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          ]
        },
        "type": {
          "description": "Determines the rule used to generate the error bars. If *constant`, the bar lengths are of a constant value. Set this constant in `value`. If *percent*, the bar lengths correspond to a percentage of underlying data. Set this percentage in `value`. If *sqrt*, the bar lengths correspond to the square of the underlying data. If *data*, the bar lengths are set with data set `array`.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "enum": [
                "percent",
                "constant",
                "sqrt",
                "data"
              ]
            }
          ]
        },
        "value": {
          "description": "Sets the value of either the percentage (if `type` is set to *percent*) or the constant (if `type` is set to *constant*) corresponding to the lengths of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 10
            }
          ]
        },
        "valueminus": {
          "description": "Sets the value of either the percentage (if `type` is set to *percent*) or the constant (if `type` is set to *constant*) corresponding to the lengths of the error bars in the bottom (left) direction for vertical (horizontal) bars",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0,
              "default": 10
            }
          ]
        },
        "visible": {
          "description": "Determines whether or not this set of error bars is visible.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "width": {
          "description": "Sets the width (in px) of the cross-bar at both ends of the error bars.",
          "oneOf": [
            {
              "$ref": "#/$defs/query-string"
            },
            {
              "type": "number",
              "minimum": 0
            }
          ]
        }
      },
      "additionalProperties": false,
      "tag": "secondary"
    }
  },
  "required": [
    "type",
    "x",
    "y"
  ],
  "additionalProperties": false
}